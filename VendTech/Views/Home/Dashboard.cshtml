﻿@model  DashboardViewModel
@{
    Layout = "~/Views/Shared/_Layoutv3.cshtml";

    var user = (UserDetails)ViewBag.LOGGEDIN_USER;
    var assignerModules = (List<ModulesModel>)ViewBag.USER_PERMISSONS;
    var country = VendTech.BLL.Common.Utilities.GetCountry();
}



<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: Arial, sans-serif;
        background-color: #f0f2f5;
        color: #333;
    }

    .v3_ui_dashboard_container {
        padding: 2rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .v3_ui_dashboard_title {
        font-size: 2rem;
        font-weight: bold;
        color: #333;
        margin-bottom: 2rem;
    }

    .v3_ui_dashboard_widgets {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
    }

    .v3_ui_dashboard_widget {
        background-color: #ffffff;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        padding: 1.5rem;
        display: flex;
        align-items: center;
        transition: transform 0.3s ease;
    }

        .v3_ui_dashboard_widget:hover {
            transform: translateY(-5px);
        }

    .v3_ui_dashboard_widget_icon {
        background-color: rgba(255, 215, 0, 0.1);
        border-radius: 50%;
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 1rem;
    }

        .v3_ui_dashboard_widget_icon i {
            font-size: 24px;
            color: #ffd700;
        }

    .v3_ui_dashboard_widget_content {
        flex: 1;
    }

    .v3_ui_dashboard_widget_title {
        font-size: 1rem;
        font-weight: 500;
        color: #666;
        margin-bottom: 0.5rem;
    }

    .v3_ui_dashboard_widget_value {
        font-size: 1.5rem;
        font-weight: bold;
        color: #333;
        margin: 0;
    }

    @@media (max-width: 768px) {
        .v3_ui_dashboard_container {
            padding: 1rem;
        }

        .v3_ui_dashboard_title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .v3_ui_dashboard_widgets {
            grid-template-columns: 1fr;
        }

        .v3_ui_dashboard_widget {
            padding: 1rem;
        }

        .v3_ui_dashboard_widget_title {
            font-size: 0.9rem;
        }

        .v3_ui_dashboard_widget_value {
            font-size: 1.25rem;
        }
    }
</style>

<div class="v3_ui_dashboard_container">
    <h1 class="v3_ui_dashboard_title">Dashboard</h1>
    <div class="v3_ui_dashboard_widgets">
        @if (ViewBag.ShowRevenueWidg && Model.currentUser.SelectedWidgets != null && Model.currentUser.SelectedWidgets.Any(y => y == 10))
        {
            <div class="v3_ui_dashboard_widget">
                <div class="v3_ui_dashboard_widget_icon">
                    <i class="ri-bank-card-line"></i>
                </div>
                <div class="v3_ui_dashboard_widget_content">
                    <h2 class="v3_ui_dashboard_widget_title">Current Agency Balance</h2>
                    <p class="v3_ui_dashboard_widget_value"> @country.CurrencyCode: @VendTech.BLL.Common.Utilities.FormatAmount(Model.revenue)</p>
                </div>
            </div>
        }
        @if (Model.currentUser.SelectedWidgets != null && Model.currentUser.SelectedWidgets.Any(y => y == 1))
        {
            <div class="v3_ui_dashboard_widget">
                <div class="v3_ui_dashboard_widget_icon">
                    <i class="ri-wallet-3-line"></i>
                </div>
                <div class="v3_ui_dashboard_widget_content">
                    <h2 class="v3_ui_dashboard_widget_title">Wallet Balance</h2>
                    <p class="v3_ui_dashboard_widget_value"> @country.CurrencyCode: <span id="userBalance">@VendTech.BLL.Common.Utilities.FormatAmount(ViewBag.walletBalance)</span></p>
                </div>
            </div>
        }
        @if (Model.currentUser.SelectedWidgets != null && Model.currentUser.SelectedWidgets.Any(y => y == 2))
        {
            <div class="v3_ui_dashboard_widget">
                <div class="v3_ui_dashboard_widget_icon">
                    <i class="ri-line-chart-line"></i>
                </div>
                <div class="v3_ui_dashboard_widget_content">
                    <h2 class="v3_ui_dashboard_widget_title"><a href="@Url.Action("SalesReport", "Report")"> </a>Total Daily Sales (today)</h2>
                    <p class="v3_ui_dashboard_widget_value"> @country.CurrencyCode: @VendTech.BLL.Common.Utilities.FormatAmount(Model.totalSales)</p>
                </div>
            </div>
        }

        @if (Model.currentUser.SelectedWidgets != null && Model.currentUser.SelectedWidgets.Any(y => y == 4))
        {
            <div class="v3_ui_dashboard_widget">
                <div class="v3_ui_dashboard_widget_icon">
                    <i class="ri-line-chart-line"></i>
                </div>
                <div class="v3_ui_dashboard_widget_content">
                    <h2 class="v3_ui_dashboard_widget_title">Active POS</h2>
                    <p class="v3_ui_dashboard_widget_value"> @Model.posCount</p>
                </div>
            </div>
        }

    </div>
</div>